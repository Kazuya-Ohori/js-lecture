<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Javascript基礎 アコーディオンサンプル４（jQuery Ver）</title>
  <script src="js/jquery.js"></script>
  <style>
    .title {
      cursor: pointer;
    }
    .target {
      height: 0;
      /*visibility: hidden;*/
      overflow: hidden;
      transition: height .3s ease, opacity .5s ease;
      opacity: 0;
    }
    .target.active {
      height: inherit;
      /*visibility: visible;*/
      opacity: 1;
    }
  </style>
</head>
<body class="markdown-body">
  <h1 class="ttl">Javascript基礎 アコーディオンサンプル４（jQuery Ver）</h1>
  <p><a href="index.html">＜ 目次に戻る</a></p>
  <ul>
    <li>
      <h2 class="title">タイトル1</h2>
      <p class="target">テキスト1テキスト1テキスト1テキスト1テキスト1<br>
        テキスト1テキスト1テキスト1テキスト1テキスト1
      </p>
    </li>
    <li>
      <h2 class="title">タイトル2</h2>
      <p class="target">テキスト2テキスト2テキスト2テキスト2テキスト2<br>
        テキスト2テキスト2テキスト2テキスト2テキスト2
      </p>
    </li>
    <li>
      <h2 class="title">タイトル3</h2>
      <p class="target">テキスト3テキスト3テキスト3テキスト3テキスト3<br>
        テキスト3テキスト3テキスト3テキスト3テキスト3
      </p>
    </li>
    <li>
      <h2 class="title">タイトル4</h2>
      <p class="target">テキスト4テキスト4テキスト4テキスト4テキスト4<br>
        テキスト4テキスト4テキスト4テキスト4テキスト4
      </p>
    </li>
  </ul>
  <script>
    // タイトル全て取得
    var $titles = $('.title');
    // タイトル全ての個数を変数に入れる
    var titleLenght = titles.length;
    // タイトルの個数分for文で繰り返し処理
    // for(var i = 0; i < titleLenght; i++){
    //   titles[i].addEventListener('click', toggleTarget, false);
    // }
    titles.click(toggleTarget);
    // ターゲットの表示・非表示処理
    function toggleTarget(){
      // var elem = event.currentTarget;
      var elem = $(this);
      // var target = elem.parentNode.querySelector(".target");
      var target = elem.next(".target");
      // var targetHeight = target.scrollHeight;
      var targetHeight = target[0].scrollHeight;
      // if(target.className.match(/active/)){
      if(target.hasClass('active')){
        // target.style.height = 0;
        target.height(0);
        // target.removeClass('active');
        target.removeClass('active');
      }else{
        // target.style.height = targetHeight+'px';
        target.height(targetHeight);
        // target.className = 'target active';
        target.addClass('active');
      }
    }
  </script>
</body>
</html>